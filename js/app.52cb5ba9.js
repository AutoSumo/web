(function(){"use strict";var t={6:function(t,e,n){var o=n(144),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("h2",[t._v("AutoSumo")])]),n("v-spacer"),null!==t.codeID?n("div",{staticClass:"d-flex align-center mr-5"},[n("h3",[t._v("ID: "+t._s(t.codeID))])]):t._e(),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{loading:t.saveLoading,color:t.saveColor,text:""},on:{click:t.save}},"v-btn",i,!1),o),[n("v-icon",{attrs:{left:""}},[t._v(" "+t._s(t.saveIcon)+" ")]),t._v(" Save ")],1)]}}])},[n("span",[t._v(t._s(t.saveHover))])])],1),n("v-main",[n("BlocklyWorkspace",{ref:"workspace",on:{change:t.onWorkspaceChange}}),n("v-snackbar",{attrs:{color:"success",bottom:"",timeout:"2500"},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.attrs;return[n("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.saveSnackbar=!1}}},"v-btn",o,!1),[t._v(" Close ")])]}}]),model:{value:t.saveSnackbar,callback:function(e){t.saveSnackbar=e},expression:"saveSnackbar"}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-check-circle")]),t._v(" Saved! ")],1)],1)],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blocklyArea"},[n("div",{ref:"blocklyDiv",staticClass:"blocklyDiv"})])},l=[],c=n(948),r=n.n(c),d=JSON.parse('{"contents":[{"kind":"category","contents":[{"kind":"block","type":"controls_if"},{"kind":"block","type":"logic_compare"},{"kind":"block","type":"logic_operation"},{"kind":"block","type":"logic_negate"},{"kind":"block","type":"logic_boolean"},{"kind":"block","type":"logic_null"},{"kind":"block","type":"logic_ternary"}],"name":"Logic","colour":"#5b80a5"},{"kind":"category","contents":[{"kind":"block","type":"controls_repeat_ext"},{"kind":"block","type":"controls_whileUntil"},{"kind":"block","type":"controls_for"},{"kind":"block","type":"controls_forEach"},{"kind":"block","type":"controls_flow_statements"}],"name":"Loops","colour":"#5ba55b"},{"kind":"category","contents":[{"kind":"block","type":"math_number"},{"kind":"block","type":"math_arithmetic"},{"kind":"block","type":"math_single"},{"kind":"block","type":"math_trig"},{"kind":"block","type":"math_constant"},{"kind":"block","type":"math_number_property"},{"kind":"block","type":"math_round"},{"kind":"block","type":"math_on_list"},{"kind":"block","type":"math_modulo"},{"kind":"block","type":"math_constrain"},{"kind":"block","type":"math_random_int"},{"kind":"block","type":"math_random_float"}],"name":"Math","colour":"#5b67a5"},{"kind":"category","contents":[{"kind":"block","type":"text"},{"kind":"block","type":"text_join"},{"kind":"block","type":"text_append"},{"kind":"block","type":"text_length"},{"kind":"block","type":"text_isEmpty"},{"kind":"block","type":"text_indexOf"},{"kind":"block","type":"text_charAt"},{"kind":"block","type":"text_getSubstring"},{"kind":"block","type":"text_changeCase"},{"kind":"block","type":"text_trim"}],"name":"Text","colour":"#5ba58c"},{"kind":"category","contents":[{"kind":"block","type":"lists_create_with"},{"kind":"block","type":"lists_create_with"},{"kind":"block","type":"lists_repeat"},{"kind":"block","type":"lists_length"},{"kind":"block","type":"lists_isEmpty"},{"kind":"block","type":"lists_indexOf"},{"kind":"block","type":"lists_getIndex"},{"kind":"block","type":"lists_setIndex"},{"kind":"block","type":"lists_getSublist"},{"kind":"block","type":"lists_split"},{"kind":"block","type":"lists_sort"}],"name":"Lists","colour":"#745ba5"},{"kind":"sep"},{"kind":"category","name":"Variables","colour":"#a55b80","custom":"VARIABLE"},{"kind":"category","name":"Functions","colour":"#995ba5","custom":"PROCEDURE"},{"kind":"sep"},{"kind":"category","contents":[{"kind":"block","type":"move_motors"},{"kind":"block","type":"move_servo"},{"kind":"block","type":"lidar_value"},{"kind":"block","type":"ir"},{"kind":"block","type":"wait"},{"kind":"block","type":"log"}],"name":"Robot","colour":"#5ba55b"}],"xmlns":"https://developers.google.com/blockly/xml","style":"display: none;"}'),p=n(483),u=n.n(p);r().Blocks.move_motors={init:function(){this.appendDummyInput().appendField("move motors"),this.appendValueInput("left").setCheck("Number").setAlign(r().ALIGN_RIGHT).appendField("left"),this.appendValueInput("right").setCheck("Number").setAlign(r().ALIGN_RIGHT).appendField("right"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r().Blocks.move_servo={init:function(){this.appendDummyInput().appendField("move servo"),this.appendValueInput("angle").setCheck("Number").setAlign(r().ALIGN_RIGHT).appendField("angle"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r().Blocks.lidar_value={init:function(){this.appendDummyInput().appendField("LiDAR value"),this.setOutput(!0,"Number"),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},r().Blocks.ir={init:function(){this.appendDummyInput().appendField("IR sensor").appendField(new(r().FieldDropdown)([["left","left"],["right","right"]]),"side"),this.setOutput(!0,"Boolean"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r().Blocks.wait={init:function(){this.appendValueInput("seconds").setCheck("Number").appendField("wait"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},r().Blocks.log={init:function(){this.appendValueInput("text").setCheck("String").appendField("log"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},r().JavaScript.move_motors=t=>{const e=r().JavaScript.valueToCode(t,"left",r().JavaScript.ORDER_ATOMIC)||"0",n=r().JavaScript.valueToCode(t,"right",r().JavaScript.ORDER_ATOMIC)||"0";return`moveMotors(${e}, ${n});\n`},r().JavaScript.move_servo=t=>{const e=r().JavaScript.valueToCode(t,"angle",r().JavaScript.ORDER_ATOMIC)||"0";return`moveServo(${e});\n`},r().JavaScript.log=t=>{const e=r().JavaScript.valueToCode(t,"text",r().JavaScript.ORDER_ATOMIC)||"";return`log(${e});\n`},r().JavaScript.lidar_value=t=>["getLidar()",r().JavaScript.ORDER_FUNCTION_CALL],r().JavaScript.ir=t=>{const e=t.getFieldValue("side");return[`getIR('${e}')`,r().JavaScript.ORDER_FUNCTION_CALL]},r().JavaScript.wait=t=>{const e=r().JavaScript.valueToCode(t,"seconds",r().JavaScript.ORDER_ATOMIC)||"0";return`await waitSeconds(${e});\n`},r().JavaScript.procedures_callreturn=function(t){const e=r().JavaScript.variableDB_.getName(t.getFieldValue("NAME"),r().PROCEDURE_CATEGORY_NAME),n=[],o=t.getVars();for(let s=0;s<o.length;s++)n[s]=r().JavaScript.valueToCode(t,"ARG"+s,r().JavaScript.ORDER_NONE)||"null";const i=`await ${e}(${n.join(", ")})`;return[i,r().JavaScript.ORDER_AWAIT]},r().JavaScript.STATEMENT_PREFIX='highlightBlock("{{code-id}}-" + %1);\n',r().JavaScript.addReservedWords("highlightBlock");var h=JSON.parse('{"blocks":{"languageVersion":0,"blocks":[{"type":"procedures_defnoreturn","id":"4e=egXUXuW.3XQy6E}+8","x":338,"y":538,"icons":{"comment":{"text":"Describe this function...","pinned":false,"height":80,"width":160}},"fields":{"NAME":"wait for ir"},"inputs":{"STACK":{"block":{"type":"controls_whileUntil","id":"W~8#?b5u2FyJ@!t@Y=j:","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"block":{"type":"logic_operation","id":"0J!#00FI{t{2%/B!SnE@","fields":{"OP":"AND"},"inputs":{"A":{"block":{"type":"ir","id":"DgIq^k94y*ppfu!A/(h%","fields":{"side":"left"}}},"B":{"block":{"type":"ir","id":"(`amh)!P!sF~]4P$]/N.","fields":{"side":"right"}}}}}},"DO":{"block":{"type":"wait","id":"B40,@C)}I!iH:1JyA[MF","inputs":{"seconds":{"block":{"type":"math_number","id":"GQwPF{JxB]SM@b!FrnjP","fields":{"NUM":0.01}}}}}}}}}}},{"type":"procedures_defnoreturn","id":"@Ek/+Rz6[^:c(g%5*q{e","x":851,"y":99,"icons":{"comment":{"text":"Describe this function...","pinned":false,"height":80,"width":160}},"fields":{"NAME":"turn around"},"inputs":{"STACK":{"block":{"type":"move_motors","id":"#sI4U,nf@rb`$VGe8R^)","inputs":{"left":{"block":{"type":"math_number","id":")jlKx=DI|;yKir+,@,2R","fields":{"NUM":-70}}},"right":{"block":{"type":"math_number","id":"/P1dmDFzPO9s{3X1t$r-","fields":{"NUM":-70}}}},"next":{"block":{"type":"wait","id":"C,wxVu;zQiO^@_+wRvg?","inputs":{"seconds":{"block":{"type":"math_number","id":"]/YMfMVA-se[n-TP7y3|","fields":{"NUM":0.8}}}},"next":{"block":{"type":"move_motors","id":"-#v6oHbH@@X57wXES!1g","inputs":{"left":{"block":{"type":"math_number","id":"}bbhKoa+Tp(dKi9.~8C.","fields":{"NUM":70}}},"right":{"block":{"type":"math_number","id":"yjTn[DqMnJ/nD8;Bnnt2","fields":{"NUM":-70}}}},"next":{"block":{"type":"wait","id":"G^9{7YrVqU;HgseP^QcE","inputs":{"seconds":{"block":{"type":"math_number","id":"=:hy?pY3A`yWy^k;$AQ(","fields":{"NUM":1.5}}}},"next":{"block":{"type":"move_motors","id":"y_Kl:O}I9Z`fL3=1R51l","inputs":{"left":{"block":{"type":"math_number","id":"b~^ku01]yQ?nQA,4WDK^","fields":{"NUM":0}}},"right":{"block":{"type":"math_number","id":":I.kmWQbWt=7pW?xEV3+","fields":{"NUM":0}}}}}}}}}}}}}}}},{"type":"controls_whileUntil","id":"aW,]c7cqL#H}wEV=Zfm[","x":350,"y":104,"fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"block":{"type":"logic_boolean","id":"9Ib]).VSCwe0?h%8%${i","fields":{"BOOL":"TRUE"}}},"DO":{"block":{"type":"move_motors","id":"f#gV2?ecOo|ILvDE^IIG","inputs":{"left":{"block":{"type":"math_number","id":"m5?#~hIe{_|pCH,j1|Z0","fields":{"NUM":70}}},"right":{"block":{"type":"math_number","id":"*WrV7^)Q=s/R}75IZ3Lo","fields":{"NUM":70}}}},"next":{"block":{"type":"procedures_callnoreturn","id":"-t`JwpqMHl47#5/4;`$M","extraState":{"name":"wait for ir"},"next":{"block":{"type":"move_motors","id":"rasj@nSNV=Kz%^4PWwC}","inputs":{"left":{"block":{"type":"math_number","id":":TYru;5~2i`@06UpAtDL","fields":{"NUM":0}}},"right":{"block":{"type":"math_number","id":"=(=8!MVxZIJhi;UTU$G{","fields":{"NUM":0}}}},"next":{"block":{"type":"wait","id":"TL@vwm;M*A9N-Lf,007r","inputs":{"seconds":{"block":{"type":"math_number","id":"`Co`r_EhRO:N5e}!iN[)","fields":{"NUM":1}}}},"next":{"block":{"type":"procedures_callnoreturn","id":"$x#HI.:7BozW(Zfk|lD~","extraState":{"name":"turn around"},"next":{"block":{"type":"wait","id":"*S8zu/7,~5o=y$h)Oiq@","inputs":{"seconds":{"block":{"type":"math_number","id":"5/{^mu2P2=rsWLUAt4{0","fields":{"NUM":1}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"i","id":"f%.%+X^[~1HhSe^lJ)CK"},{"name":"j","id":"P#4Nc6IfOR?PY*Wt5o9j"}]}'),k={name:"BlocklyWorkspace",data:()=>({loadedIn:!1}),async mounted(){const t={toolbox:d,collapse:!0,comments:!0,disable:!0,maxBlocks:1/0,trashcan:!0,horizontalLayout:window.screen.width<window.screen.height,toolboxPosition:"start",css:!0,rtl:!1,scrollbars:!0,sounds:!0,oneBasedIndex:!1};this.workspace=r().inject(this.$refs.blocklyDiv,t);const e=[r().Events.BLOCK_CREATE,r().Events.BLOCK_DELETE,r().Events.BLOCK_CHANGE,r().Events.BLOCK_MOVE,r().Events.COMMENT_CREATE,r().Events.COMMENT_DELETE,r().Events.COMMENT_CHANGE,r().Events.COMMENT_MOVE,r().Events.VAR_CREATE,r().Events.VAR_DELETE,r().Events.VAR_RENAME];this.workspace.addChangeListener((t=>{this.loadedIn&&e.includes(t.type)&&this.$emit("change")}));const n=await u().getItem("workspace");null!==n?r().serialization.workspaces.load(JSON.parse(n),this.workspace):r().serialization.workspaces.load(h,this.workspace);const o=t=>{t.type===r().Events.FINISHED_LOADING&&(this.loadedIn=!0,this.workspace.removeChangeListener(o))};this.workspace.addChangeListener(o)},methods:{async save(){const t=r().serialization.workspaces.save(this.workspace);await u().setItem("workspace",JSON.stringify(t))},getCode(t){return"(async () => {\n"+r().JavaScript.workspaceToCode(this.workspace).replace(/(?<=^|\n)function \w+\(.*\)/g,"async $&").replace(/{{code-id}}/g,t)+"})();"},highlightBlock(t){this.workspace.highlightBlock(t)}}},b=k,v=n(1),m=(0,v.Z)(b,a,l,!1,null,"5e4e9bb6",null),y=m.exports,_=n(416);const f=(0,_.kP)("1234567890abcdef",6);let g=null;var E={name:"App",components:{BlocklyWorkspace:y},data:()=>({saveLoading:!1,changesExist:!1,hasSaved:!1,saveSnackbar:!1,codeID:null}),computed:{saveIcon(){return"mdi-"+(this.changesExist?"content-save-edit":this.hasSaved?"content-save-check":"content-save")},saveColor(){return this.changesExist||!this.hasSaved?"":"light-green accent-3"},saveHover(){return this.changesExist?"Unsaved changes":this.hasSaved?"All changes saved":"Save your changes"}},methods:{async save(){this.saveLoading=!0,await this.$refs.workspace.save(),null===this.codeID&&(this.codeID=f(),this.connectWS(),u().setItem("code-id",this.codeID)),await fetch("https://autosumo.techchrism.me/code/upload/"+this.codeID,{method:"POST",body:this.$refs.workspace.getCode(this.codeID)}),this.changesExist=!1,this.hasSaved=!0,this.saveLoading=!1,this.saveSnackbar=!0},onWorkspaceChange(){this.changesExist=!0},getCode(){console.log(this.$refs.workspace.getCode())},connectWS(){g=new WebSocket("wss://autosumo.techchrism.me/code/upload/"),g.onopen=()=>{g.send(JSON.stringify({type:"register",id:this.codeID}))},g.onmessage=t=>{const e=JSON.parse(t.data);"highlight"===e.type&&this.$refs.workspace.highlightBlock(e.statement)},g.onclose=()=>{console.log("Disconnected from websocket")}}},async mounted(){window.addEventListener("beforeunload",(t=>{if(this.changesExist)return t.preventDefault(),t.returnValue="Are you sure you want to exit? You have unsaved changes."}));const t=await u().getItem("code-id");null!==t&&(this.codeID=t,this.connectWS())}},S=E,w=n(453),O=n.n(w),C=n(726),I=n(728),x=n(454),N=n(88),A=n(102),D=n(741),T=n(536),M=n(80),R=(0,v.Z)(S,i,s,!1,null,null,null),L=R.exports;O()(R,{VApp:C.Z,VAppBar:I.Z,VBtn:x.Z,VIcon:N.Z,VMain:A.Z,VSnackbar:D.Z,VSpacer:T.Z,VTooltip:M.Z});var J=n(629);o.Z.use(J.ZP);var U=new J.ZP.Store({state:{},mutations:{},actions:{},modules:{}}),V=n(154);o.Z.use(V.Z);var B=new V.Z({});u().config({name:"autosumo"}),o.Z.config.productionTip=!1,new o.Z({store:U,vuetify:B,render:function(t){return t(L)}}).$mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,s){if(!o){var a=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],s=t[d][2];for(var l=!0,c=0;c<o.length;c++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(l=!1,s<a&&(a=s));if(l){t.splice(d--,1);var r=i();void 0!==r&&(e=r)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[o,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,s,a=o[0],l=o[1],c=o[2],r=0;if(a.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(c)var d=c(n)}for(e&&e(o);r<a.length;r++)s=a[r],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(d)},o=self["webpackChunkweb"]=self["webpackChunkweb"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6)}));o=n.O(o)})();
//# sourceMappingURL=app.52cb5ba9.js.map